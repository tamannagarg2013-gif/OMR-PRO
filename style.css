function addQuestions() {
    const type = document.getElementById('qType').value;
    const count = parseInt(document.getElementById('qCount').value);
    const container = document.getElementById('omrGrid');

    const sectionBlock = document.createElement('div');
    sectionBlock.className = 'section-block';
    
    const titleDiv = document.createElement('div');
    titleDiv.className = 'section-title';
    titleDiv.innerText = type.toUpperCase() + " SECTION";
    sectionBlock.appendChild(titleDiv);

    for (let i = 0; i < count; i++) {
        const row = document.createElement('div');
        row.className = 'q-row'; // This is the horizontal row

        const numSpan = document.createElement('div');
        numSpan.className = 'q-num';
        numSpan.innerText = questionCounter + ".";
        row.appendChild(numSpan);

        const optionsDiv = document.createElement('div');
        optionsDiv.className = 'options-wrapper'; // This holds options horizontally

        if (type === 'integer') {
            const mainInput = document.createElement('input');
            mainInput.type = 'number';
            mainInput.className = 'no-print';
            mainInput.style.width = '50px';
            
            const boxContainer = document.createElement('div');
            boxContainer.className = 'integer-box-container';

            mainInput.oninput = function() {
                boxContainer.innerHTML = '';
                for (let char of this.value) {
                    const box = document.createElement('div');
                    box.className = 'int-box-display';
                    box.innerText = char;
                    boxContainer.appendChild(box);
                }
            };
            optionsDiv.appendChild(mainInput);
            optionsDiv.appendChild(boxContainer);
        } else {
            ['A', 'B', 'C', 'D'].forEach(opt => {
                const b = document.createElement('div');
                b.className = 'bubble';
                b.innerText = opt;
                b.onclick = function() { this.classList.toggle('filled'); };
                optionsDiv.appendChild(b);
            });
        }

        row.appendChild(optionsDiv);
        sectionBlock.appendChild(row);
        questionCounter++;
    }
    container.appendChild(sectionBlock);
}
